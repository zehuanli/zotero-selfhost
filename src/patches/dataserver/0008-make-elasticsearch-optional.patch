diff --git a/include/header.inc.php b/include/header.inc.php
index 11ce756..3f30ba3 100644
--- a/include/header.inc.php
+++ b/include/header.inc.php
@@ -237,10 +237,12 @@ Z_Core::$AWS = new Aws\Sdk($awsConfig);
 unset($awsConfig);
 
 // Elasticsearch
-$esConfig = [
-	'hosts' => Z_CONFIG::$SEARCH_HOSTS
-];
-Z_Core::$ES = \Elasticsearch\ClientBuilder::fromConfig($esConfig, true);
+if (Z_CONFIG::$ELASTICSEARCH_ENABLED) {
+	$esConfig = [
+		'hosts' => Z_CONFIG::$SEARCH_HOSTS
+	];
+	Z_Core::$ES = \Elasticsearch\ClientBuilder::fromConfig($esConfig, true);
+}
 
 require('interfaces/IAuthenticationPlugin.inc.php');
 
diff --git a/model/FullText.inc.php b/model/FullText.inc.php
index ce15442..9059b2f 100644
--- a/model/FullText.inc.php
+++ b/model/FullText.inc.php
@@ -224,6 +224,9 @@ class Zotero_FullText {
 	 * @return {Array<String>|null} An array of item keys, or null if no results
 	 */
 	public static function searchInLibrary($libraryID, $searchText) {
+		if (! Z_CONFIG::$ELASTICSEARCH_ENABLED) {
+			return null;
+		}
 		$params = [
 			'index' => self::$elasticsearchType . "_index",
 			'type' => self::$elasticsearchType,
